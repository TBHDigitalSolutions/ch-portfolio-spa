/* src/components/VideoGrid/videogrid.css */
/* VideoGrid Main CSS - Imports and Global Styles Using TBH Variables - UPDATED */

/* =================================
   COMPONENT IMPORTS
   ================================= */
@import './videogrid-component.css';
@import './videocard.css';
@import './videoplayer.css';
@import './videojsplayer.css';

/* =================================
      GLOBAL VIDEOGRID STYLES
      ================================= */

/* Base reset for VideoGrid components */
.video-grid-showcase *,
.video-grid-showcase *::before,
.video-grid-showcase *::after {
    box-sizing: border-box;
}

/* =================================
      SHARED ANIMATION KEYFRAMES
      ================================= */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes videoGridSpin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

@keyframes videoSpinner {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

@keyframes videoGridPulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

/* =================================
      SHARED LOADING STATES
      ================================= */
.video-loading {
    display: none;
    /* Hide old implementation to prevent conflicts */
}

/* =================================
      UTILITY CLASSES
      ================================= */
.video-grid-hidden {
    display: none !important;
}

.video-grid-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.video-grid-loading-pulse {
    animation: videoGridPulse 2s ease-in-out infinite;
}

/* =================================
      FOCUS MANAGEMENT
      ================================= */
.video-grid-focus-trap {
    position: relative;
}

.video-grid-focus-trap:focus {
    outline: none;
}

/* Enhanced focus indicators for keyboard navigation */
.video-grid-showcase button:focus-visible,
.video-grid-showcase [tabindex]:focus-visible {
    outline: var(--focus-outline-width) solid var(--focus-outline-color);
    outline-offset: var(--focus-outline-offset);
    border-radius: var(--radius-sm);
}

/* =================================
      PERFORMANCE OPTIMIZATIONS FROM ORIGINAL
      ================================= */
/* Performance Optimizations for VideoGrid */
.video-loading-overlay,
.videojs-player-wrapper {
    will-change: opacity;
}

.video-loading-overlay .loading-spinner {
    will-change: transform;
}

/* GPU acceleration for smooth overlays */
.video-loading-overlay,
.videojs-player-wrapper {
    transform: translateZ(0);
}

/* Force Video.js <video> to fill its container */
.video-js .vjs-tech,
.videojs-player-wrapper video {
    height: 100% !important;
}

/* =================================
      PRINT STYLES
      ================================= */
@media print {
    .video-grid-showcase {
        break-inside: avoid;
    }

    .video-section {
        break-inside: avoid;
        page-break-inside: avoid;
    }

    .video-player-container,
    .video-loading-overlay,
    .video-overlay {
        display: none !important;
    }

    .video-card-content {
        border: 1px solid #000;
        padding: var(--spacing-md);
        background: #fff !important;
    }

    .video-title {
        color: #000 !important;
        font-weight: bold;
    }

    .section-title {
        color: #000 !important;
        border-bottom: 2px solid #000;
        padding-bottom: var(--spacing-sm);
    }
}

/* =================================
      TOUCH DEVICE OPTIMIZATIONS
      ================================= */
@media (hover: none) and (pointer: coarse) {

    /* Touch-friendly adjustments */
    .video-card-button {
        min-height: 44px;
        padding: var(--spacing-sm);
    }

    .video-overlay {
        opacity: 0.8;
        /* Always slightly visible on touch */
    }

    .video-card.selected .video-overlay {
        opacity: 1;
    }

    /* Remove hover effects on touch devices */
    .video-card-button:hover {
        transform: none;
    }

    .video-card-button:hover .video-thumbnail {
        transform: none;
    }
}

/* =================================
      MOTION PREFERENCES
      ================================= */
@media (prefers-reduced-motion: reduce) {

    /* Disable all animations and transitions */
    .video-grid-showcase *,
    .video-grid-showcase *::before,
    .video-grid-showcase *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    /* Reset transforms */
    .video-card:hover {
        transform: none !important;
    }

    .video-thumbnail:hover {
        transform: none !important;
    }

    /* Disable loading spinners */
    .loading-spinner {
        animation: none !important;
        border: 3px solid var(--color-accent) !important;
        border-radius: var(--radius-circle);
    }

    .video-loading-overlay .loading-spinner {
        animation: none;
    }

    .video-card {
        animation: none;
        opacity: 1;
        transform: none;
    }

    .video-card-button:hover {
        transform: none;
    }

    .video-card-button:hover .video-thumbnail {
        transform: none;
    }

    .video-card-button:hover .overlay-content,
    .video-card.selected .overlay-content {
        transform: translateY(0);
    }

    .video-js .vjs-big-play-button:hover {
        transform: none;
    }
}

/* =================================
      COLOR SCHEME PREFERENCES
      ================================= */
@media (prefers-color-scheme: light) {
    .video-grid-showcase {
        color-scheme: light;
    }
}

@media (prefers-color-scheme: dark) {
    .video-grid-showcase {
        color-scheme: dark;
    }
}

/* =================================
      CONTAINER QUERIES (FUTURE)
      ================================= */
@container (max-width: 600px) {
    .video-section-content {
        flex-direction: column;
        gap: var(--spacing-md);
    }

    .video-grid-sidebar {
        width: 100%;
        max-height: 200px;
    }

    .video-player-area {
        width: 100%;
    }
}

/* =================================
      ACCESSIBILITY ENHANCEMENTS
      ================================= */
/* Screen reader improvements */
.video-grid-showcase [aria-hidden="true"] {
    display: none;
}

/* Focus indicators for high contrast */
@media (prefers-contrast: high) {
    .video-grid-showcase *:focus {
        outline: 3px solid var(--primary-text) !important;
        outline-offset: 2px;
    }

    .video-card.selected .video-card-button {
        border: 3px solid var(--color-accent) !important;
    }

    .video-section {
        border: 2px solid var(--primary-text);
    }

    .video-loading-overlay {
        background: rgba(0, 0, 0, 0.95);
        border: 2px solid white;
    }

    .video-player-error {
        border: 2px solid white;
    }

    .retry-button {
        border: 2px solid white;
    }
}

/* =================================
      BROWSER-SPECIFIC FIXES
      ================================= */

/* Firefox specific fixes */
@-moz-document url-prefix() {
    .video-grid-container {
        scrollbar-width: thin;
        scrollbar-color: #d1d5db transparent;
    }
}

/* Safari specific fixes */
@supports (-webkit-appearance: none) {
    .video-js .vjs-tech {
        -webkit-transform: translateZ(0);
    }

    .video-thumbnail {
        -webkit-backface-visibility: hidden;
    }
}

/* Edge/IE specific fixes */
@supports (-ms-ime-align: auto) {
    .video-grid-container {
        -ms-overflow-style: -ms-autohiding-scrollbar;
    }
}

/* =================================
      COMPONENT STATE CLASSES
      ================================= */
.video-grid-showcase.loading {
    pointer-events: auto;
    opacity: 0.7;
}

.video-grid-showcase.error {
    filter: grayscale(50%);
}

/* =================================
      VENDOR PREFIXES FOR BETTER SUPPORT
      ================================= */
.video-card-button {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.video-overlay {
    -webkit-backdrop-filter: blur(2px);
    backdrop-filter: blur(2px);
}

/* =================================
      FINAL PERFORMANCE OPTIMIZATIONS
      ================================= */
/* Composite layers for GPU acceleration */
.video-player-container,
.video-loading-overlay,
.video-overlay {
    will-change: auto;
    transform: translateZ(0);
}

/* Optimize scroll performance */
.video-grid-container {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

/* Prevent layout thrashing */
.video-thumbnail,
.video-card-button {
    contain: layout style paint;
}

/* =================================
      CRITICAL CSS LOADING OPTIMIZATION
      ================================= */
/* Above-the-fold critical styles */
.video-grid-showcase {
    min-height: 400px;
}

.video-section:first-child {
    margin-top: 0;
}

